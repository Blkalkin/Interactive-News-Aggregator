!function(){"use strict";!function(){function e(e,t){!function(e){const t=document.getElementById("topics-pane");t.innerHTML="",e.forEach((e=>{const n=document.createElement("div");n.classList.add("article");const o=document.createElement("h3");o.textContent=e.title,o.classList.add("article-title");const d=document.createElement("i");d.textContent=`Published on ${e.publish_date}`,d.classList.add("article-date");const s=document.createElement("div");s.classList.add("info-container","hidden");const c=document.createElement("button");c.textContent="Expand Article",c.classList.add("expand-article");const a=document.createElement("a");a.textContent="Go to Site",a.href=e.url,a.target="_blank",a.classList.add("go-to-site");const i=document.createElement("div");i.classList.add("content-container","hidden");const l=document.createElement("p");l.textContent=e.body,l.classList.add("article-body"),i.appendChild(l),s.appendChild(c),o.addEventListener("click",(()=>{s.classList.toggle("hidden")})),c.addEventListener("click",(e=>{e.stopPropagation(),i.classList.toggle("hidden"),i.classList.contains("hidden")?s.contains(a)&&s.removeChild(a):s.appendChild(a),c.textContent=i.classList.contains("hidden")?"Expand Article":"Collapse Article"})),n.appendChild(o),n.appendChild(d),n.appendChild(s),n.appendChild(i),t.appendChild(n),n.dataset.articleId=e.id,n.setAttribute("draggable",!0),n.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",e.target.dataset.articleId)})),t.appendChild(n)})),function(){const e=document.getElementById("response-pane");e.addEventListener("dragover",(e=>{e.preventDefault()})),e.addEventListener("drop",(t=>{t.preventDefault();const n=t.dataTransfer.getData("text/plain");e.dataset.selectedArticleId=n}))}()}(t[e])}function t(e,t){const n=document.getElementById("response-pane"),o=document.createElement("div");o.textContent=e,o.className=t?"chat-message question":"chat-message response";const d=document.getElementById("input-container");n.insertBefore(o,d),n.scrollTop=n.scrollHeight}document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("app");const t=document.getElementById("divider"),n=document.getElementById("topics-pane");let o=!1;t.addEventListener("mousedown",(e=>{e.preventDefault(),o=!0})),document.addEventListener("mousemove",(e=>{o&&(e=>{const t=e.clientX,o=app.offsetWidth;t>100&&t<o-100&&(n.style.width=`${t}px`)})(e)})),document.addEventListener("mouseup",(()=>{o&&(o=!1)})),(console.log("fetchLatestArticles started"),fetch("http://13.52.254.92:8000/latest_articles/").then((e=>{if(console.log("Response received"),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((t=>{console.log("Data processed");const n=Object.keys(t);!function(t,n){console.log("renderTopicHeader started");const o=document.getElementById("app"),d=document.createElement("div");d.id="topic-header",d.classList.add("topic-header"),o.insertBefore(d,o.firstChild);const s=document.createElement("div");s.id="topics-menu",s.classList.add("topics-menu","hidden"),console.log("topic header",d),o.appendChild(s),console.log("hello world",s),d.textContent=t[0],d.addEventListener("click",(()=>{console.log("Topic header clicked"),s.classList.toggle("hidden"),console.log("Topic menu class list:",s.classList)})),t.forEach((t=>{const o=document.createElement("div");o.textContent=t,o.classList.add("topic-option"),o.addEventListener("click",(()=>{console.log(`Topic option "${t}" clicked`),e(t,n),d.textContent=t,s.classList.add("hidden")})),s.appendChild(o)})),console.log("renderTopicHeader completed")}(n,t),e(n[0],t),console.log("Topics Menu immediately after render:",document.getElementById("topics-menu"))})).catch((e=>{console.error("Could not get articles:",e)}))).then((()=>{setTimeout((()=>{console.log("Topic Header:",document.getElementById("topic-header")),console.log("Topics Menu:",document.getElementById("topics-menu"))}),1e3)}))})),document.getElementById("submit-button").addEventListener("click",(()=>{const e=document.getElementById("user-input"),n=e.value,o=document.getElementById("response-pane").dataset.selectedArticleId;n&&o&&(function(e,n){t(n,!0),fetch("http://13.52.254.92:8000/analyze_article/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({article_id:e,question_text:n})}).then((e=>e.json())).then((e=>{console.log(e),t(e.response.choices[0].message.content,!1)})).catch((e=>{console.error("Error:",e)}))}(o,n),e.value="")}))}()}();
//# sourceMappingURL=main.js.map